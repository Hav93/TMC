# 更新日志

本文档记录 TMC 项目的所有重要更改。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，  
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

---

## [1.0.0] - 2025-10-06 🎉

**首个生产就绪版本发布！**

### ✨ 新增
- 主题系统支持 View Transitions API 动画效果
- 统一的色彩管理系统（`ThemeContext`）
- 容器日志支持 URL query 参数传递认证 token

### 🔧 修复
- **[关键]** 修复主题切换需要页面刷新的问题
- **[关键]** 修复容器日志 401 未授权错误
- **[关键]** 修复系统状态接口认证失败
- **[关键]** 解决 Alembic 数据库迁移"Multiple head revisions"冲突
- 修复 `localStorage` key 不一致问题（`token` vs `access_token`）
- 修复浏览器缓存导致的 JS 文件更新问题

### 🎨 优化
- 重构所有组件使用统一的主题色彩系统
- 移除所有内联样式中的 CSS 变量引用
- 优化主题切换性能，移除不必要的组件重渲染
- 统一 API 认证方式，支持 Header 和 Query 参数
- 改进错误日志输出，便于调试

### 🗂️ 项目管理
- 创建 `_archived` 文件夹归档非生产文件
- 整理项目文档，创建 `PROJECT_STATUS.md`
- 更新 `README.md` 为生产就绪版本
- 创建 `cleanup.ps1` 自动清理脚本

### 📝 文档
- 新增完整的部署指南
- 新增故障排查文档
- 新增系统架构说明
- 更新 API 认证文档

### 🔄 重构
- 统一前端主题系统架构
- 重构中间件认证逻辑
- 优化数据库迁移文件结构

### 🗑️ 移除
- 移除 `key={themeVersion}` 强制重渲染机制
- 清理临时开发文件和测试数据
- 归档开发文档和脚本

---

## [0.3.1] - 2025-10-06 (内部版本)

### ✨ 新增
- 用户头像上传功能
- 个人资料编辑页面
- 密码修改功能
- 用户管理 CRUD 接口

### 🔧 修复
- 修复用户表缺少 `avatar` 字段
- 优化认证流程

### 📝 文档
- 添加 API 类型生成指南
- 完善开发文档

---

## [0.3.0] - 2025-10-05 (内部版本)

### ✨ 新增（重大更新）
- **全面重构为前后端分离架构**
- 使用 FastAPI 替换 Flask
- React + TypeScript 前端
- Docker 容器化部署
- JWT 认证系统
- 实时容器日志流（SSE）
- 增强模式状态监控
- SQLAlchemy 异步 ORM
- Alembic 数据库迁移

### 🎨 界面
- 全新的现代化 UI 设计
- 响应式布局
- 深色/浅色主题支持
- 玻璃态视觉效果

### 🔐 安全
- JWT Token 认证
- 密码哈希存储
- 请求认证中间件
- CORS 配置

### 📊 功能
- 仪表板统计
- 转发规则管理
- 关键词过滤
- 消息替换规则
- 实时日志查看
- 聊天列表管理
- 客户端状态监控

---

## [0.2.x] - 历史版本 (内部开发)

### 功能特性
- 基础的消息转发功能
- 简单的规则配置
- Flask Web 界面
- SQLite 数据库

---

## 版本说明

### 版本号规则
- **主版本号(X)**: 不兼容的 API 修改
- **次版本号(Y)**: 向下兼容的功能性新增
- **修订号(Z)**: 向下兼容的问题修正

### 更新类型标识
- ✨ **新增**: 新功能
- 🔧 **修复**: Bug 修复
- 🎨 **优化**: 改进和优化
- 🗂️ **项目管理**: 项目结构调整
- 📝 **文档**: 文档更新
- 🔄 **重构**: 代码重构
- 🗑️ **移除**: 删除功能或代码
- 🔐 **安全**: 安全相关更新
- ⚡ **性能**: 性能优化

---

## 路线图

### 计划中的功能
- [ ] 消息统计图表增强
- [ ] 规则导入/导出功能
- [ ] 多语言支持（i18n）
- [ ] WebSocket 实时通知
- [ ] 高级过滤规则（正则表达式）
- [ ] 消息队列优化
- [ ] Redis 缓存支持
- [ ] PostgreSQL 支持
- [ ] 移动端 App

### 考虑中的改进
- [ ] 性能监控面板
- [ ] 自动备份功能
- [ ] 消息归档策略
- [ ] 更多主题选项
- [ ] 插件系统

---

**最后更新**: 2025-10-06  
**当前版本**: v1.0.0

